<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Real-Time Sensor Graphs</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            color: #333;
            margin: 0;
            padding: 0;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            padding: 20px;
            background-color: #4CAF50;
            color: white;
            margin-bottom: 20px;
            width: 100%;
        }

        .header h1 {
            margin: 10px 0;
        }

        .chart-container {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            padding: 20px;
            margin: 20px 0;
        }

        .footer {
            text-align: center;
            padding: 20px;
            background-color: #333;
            color: white;
            margin-top: auto;
            width: 100%;
        }

        .footer p {
            margin: 0;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Real-Time Sensor Graphs</h1>
    </div>

    <div class="container">
        <div class="chart-container">
            <h2>Air Quality</h2>
            <canvas id="airQualityChart"></canvas>
        </div>
        <div class="chart-container">
            <h2>Temperature</h2>
            <canvas id="temperatureChart"></canvas>
        </div>
        <div class="chart-container">
            <h2>Humidity</h2>
            <canvas id="humidityChart"></canvas>
        </div>
        <div class="chart-container">
            <h2>Flame</h2>
            <canvas id="flameChart"></canvas>
        </div>
        <div class="chart-container">
            <h2>CO</h2>
            <canvas id="coChart"></canvas>
        </div>
        <div class="chart-container">
            <h2>Smoke</h2>
            <canvas id="smokeChart"></canvas>
        </div>
        <div class="chart-container">
            <h2>Alcohol</h2>
            <canvas id="alcoholChart"></canvas>
        </div>
        <div class="chart-container">
            <h2>LPG</h2>
            <canvas id="lpgChart"></canvas>
        </div>
    </div>

    <div class="footer">
        <p>&copy; 2024 Air Monitor System. All rights reserved.</p>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        const CHANNEL_ID = '2504082';
        const READ_API_KEY = 'NK3ARIOXX88AJ417';

        const chartOptions = {
            type: 'line',
            data: {
                labels: [], // Timestamps
                datasets: [{
                    data: [],
                    borderColor: 'rgba(75, 192, 192, 1)',
                    fill: false
                }]
            },
            options: {
                responsive: true,
                title: {
                    display: true,
                    text: ''
                },
                scales: {
                    xAxes: [{
                        type: 'time',
                        time: { unit: 'hour', displayFormats: { hour: 'HH:mm' } },
                        scaleLabel: { display: true, labelString: 'Time' }
                    }],
                    yAxes: [{
                        scaleLabel: {
                            display: true,
                            labelString: 'Value'
                        }
                    }]
                }
            }
        };

        const airQualityChart = new Chart(document.getElementById('airQualityChart').getContext('2d'), { ...chartOptions, options: { ...chartOptions.options, title: { text: 'Air Quality' } } });
        const temperatureChart = new Chart(document.getElementById('temperatureChart').getContext('2d'), { ...chartOptions, options: { ...chartOptions.options, title: { text: 'Temperature' } } });
        const humidityChart = new Chart(document.getElementById('humidityChart').getContext('2d'), { ...chartOptions, options: { ...chartOptions.options, title: { text: 'Humidity' } } });
        const flameChart = new Chart(document.getElementById('flameChart').getContext('2d'), { ...chartOptions, options: { ...chartOptions.options, title: { text: 'Flame' } } });
        const coChart = new Chart(document.getElementById('coChart').getContext('2d'), { ...chartOptions, options: { ...chartOptions.options, title: { text: 'CO' } } });
        const smokeChart = new Chart(document.getElementById('smokeChart').getContext('2d'), { ...chartOptions, options: { ...chartOptions.options, title: { text: 'Smoke' } } });
        const alcoholChart = new Chart(document.getElementById('alcoholChart').getContext('2d'), { ...chartOptions, options: { ...chartOptions.options, title: { text: 'Alcohol' } } });
        const lpgChart = new Chart(document.getElementById('lpgChart').getContext('2d'), { ...chartOptions, options: { ...chartOptions.options, title: { text: 'LPG' } } });

        async function fetchData() {
            try {
                const response = await fetch(`https://api.thingspeak.com/channels/${CHANNEL_ID}/feeds.json?api_key=${READ_API_KEY}&results=10`);
                const data = await response.json();
                const feeds = data.feeds;

                const labels = feeds.map(feed => new Date(feed.created_at));
                const airQualityData = feeds.map(feed => feed.field1);
                const temperatureData = feeds.map(feed => feed.field2);
                const humidityData = feeds.map(feed => feed.field3);
                const flameData = feeds.map(feed => feed.field4);
                const coData = feeds.map(feed => feed.field5);
                const smokeData = feeds.map(feed => feed.field6);
                const alcoholData = feeds.map(feed => feed.field7);
                const lpgData = feeds.map(feed => feed.field8);

                updateChart(airQualityChart, labels, airQualityData);
                updateChart(temperatureChart, labels, temperatureData);
                updateChart(humidityChart, labels, humidityData);
                updateChart(flameChart, labels, flameData);
                updateChart(coChart, labels, coData);
                updateChart(smokeChart, labels, smokeData);
                updateChart(alcoholChart, labels, alcoholData);
                updateChart(lpgChart, labels, lpgData);
            } catch (error) {
                console.error('Error fetching data:', error);
            }
        }

        function updateChart(chart, labels, data) {
            chart.data.labels = labels;
            chart.data.datasets[0].data = data;
            chart.update();
        }

        setInterval(fetchData, 5000); // Update every 5 seconds
        fetchData(); // Initial fetch
    </script>
</body>
</html>

